<?xml version="1.0" encoding="UTF-8" ?>

<!-- 
This XML is responsible of installing custom tables to our databases
-->


<XMLDB PATH="mod/speval/db" VERSION="2025092202" COMMENT="SPEval tables">
    <TABLES>

	<TABLE NAME="speval" COMMENT="Stores SPEval activity instances">
    	    <FIELDS>
        	<FIELD NAME="id" TYPE="int" LENGTH="10" SEQUENCE="true" NOTNULL="true"/>
        	<FIELD NAME="course" TYPE="int" LENGTH="10" NOTNULL="true"/>
        	<FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="true"/>
        	<FIELD NAME="intro" TYPE="text" NOTNULL="false"/>
        	<FIELD NAME="introformat" TYPE="int" LENGTH="4" NOTNULL="true" DEFAULT="0"/>
        	<FIELD NAME="criteria_count" TYPE="int" LENGTH="4" NOTNULL="true" DEFAULT="3"/>
        	<FIELD NAME="timemodified" TYPE="int" LENGTH="10" NOTNULL="true"/>
    	    </FIELDS>
    	    <KEYS>
 	       	<KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        	<KEY NAME="course" TYPE="foreign" FIELDS="course" REFTABLE="course" REFFIELDS="id"/>
   	    </KEYS>
	</TABLE>


        <TABLE NAME="speval_eval" COMMENT="Stores peer evaluations">
            <FIELDS>
                <FIELD NAME="id" TYPE="int" LENGTH="10" SEQUENCE="true" NOTNULL="true"/>
                <FIELD NAME="unitid" TYPE="int" LENGTH="10" NOTNULL="true" COMMENT="The ID of the course module instance"/>
                <FIELD NAME="userid" TYPE="int" LENGTH="10" NOTNULL="true" COMMENT="Who gave the evaluation"/>
                <FIELD NAME="peerid" TYPE="int" LENGTH="10" NOTNULL="true" COMMENT="Who is being evaluated"/>
                <FIELD NAME="criteria1" TYPE="int" LENGTH="4" NOTNULL="true" DEFAULT="0"/>
                <FIELD NAME="criteria2" TYPE="int" LENGTH="4" NOTNULL="true" DEFAULT="0"/>
                <FIELD NAME="criteria3" TYPE="int" LENGTH="4" NOTNULL="true" DEFAULT="0"/>
                <FIELD NAME="criteria4" TYPE="int" LENGTH="4" NOTNULL="true" DEFAULT="0"/>
                <FIELD NAME="criteria5" TYPE="int" LENGTH="4" NOTNULL="true" DEFAULT="0"/>
                <FIELD NAME="comment" TYPE="text" NOTNULL="false"/>
                <FIELD NAME="timecreated" TYPE="int" LENGTH="10" NOTNULL="true"/>
            </FIELDS>
            <KEYS>
                <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
            </KEYS>
            <INDEXES>
            <INDEX NAME="unitid" UNIQUE="false" FIELDS="unitid"/>
            <INDEX NAME="userid" UNIQUE="false" FIELDS="userid"/>
            <INDEX NAME="peerid" UNIQUE="false" FIELDS="peerid"/>
            </INDEXES>
        </TABLE>
        <TABLE NAME="speval_questions" COMMENT="Stores questions added by teachers">
            <FIELDS>
                <FIELD NAME="id" TYPE="int" LENGTH="10" SEQUENCE="true" NOTNULL="true"/>
                <FIELD NAME="unitid" TYPE="int" LENGTH="10" NOTNULL="true" COMMENT="The ID of the course module instance"/>
                <FIELD NAME="userid" TYPE="int" LENGTH="10" NOTNULL="true" COMMENT="Teacher who added the question"/>
                <FIELD NAME="peerid" TYPE="int" LENGTH="10" NOTNULL="true" COMMENT="Group or peer ID (auto-filled)"/>
                <FIELD NAME="questiontext" TYPE="text" NOTNULL="true"/>
                <FIELD NAME="timecreated" TYPE="int" LENGTH="10" NOTNULL="true"/>
            </FIELDS>
            <KEYS>
                <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
            </KEYS>
            <INDEXES>
                <INDEX NAME="unitid" UNIQUE="false" FIELDS="unitid"/>
                <INDEX NAME="userid" UNIQUE="false" FIELDS="userid"/>
                <INDEX NAME="peerid" UNIQUE="false" FIELDS="peerid"/>
            </INDEXES>
        </TABLE>
    </TABLES>
</XMLDB>